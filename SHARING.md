# Как поделиться ботом с друзьями

Это руководство объясняет, как безопасно поделиться CSFloat Outbid Bot с друзьями, сохранив админ-панель приватной.

## Быстрый старт для друзей

### Вариант 1: Docker (Рекомендуется)

1. **Клонировать репозиторий:**
   ```bash
   git clone <ссылка-на-репо>
   cd csfloat-bot
   ```

2. **Создать файл `.env`:**
   ```bash
   cp .env.example .env
   ```

3. **Сгенерировать безопасный JWT секрет:**
   ```bash
   python -c "import secrets; print(secrets.token_hex(32))"
   ```
   Скопируй результат и вставь как `JWT_SECRET_KEY` в `.env`

4. **Запустить через Docker:**
   ```bash
   docker-compose up -d
   ```

5. **Открыть бота:**
   - Перейди на http://localhost:8000
   - Зарегистрируй новый аккаунт
   - Добавь свой CSFloat API ключ

### Вариант 2: Без Docker

1. **Клонировать и настроить:**
   ```bash
   git clone <ссылка-на-репо>
   cd csfloat-bot
   python -m venv venv

   # Windows:
   venv\Scripts\activate
   # Linux/Mac:
   source venv/bin/activate

   pip install -r requirements.txt
   ```

2. **Настроить:**
   ```bash
   cp .env.example .env
   # Отредактируй .env и установи JWT_SECRET_KEY
   ```

3. **Запустить:**
   ```bash
   python main.py
   ```

---

## Что получают друзья

- Полный функционал бота (автоматическое перебивание)
- Управление аккаунтами (добавление/удаление CSFloat аккаунтов)
- Отслеживание и синхронизация ордеров
- Real-time обновления через WebSocket
- Настройка параметров
- Тёмная тема

## Чего НЕ получают друзья

- Админ-панель (`/admin` возвращает 404)
- Управление пользователями
- Доступ к системным логам
- Возможность видеть данные других пользователей

---

## Заметки по безопасности

### Каждый деплой изолирован:
- **Разный JWT_SECRET_KEY** = Разные сессии (нельзя использовать чужие токены)
- **Разная база данных** = Разные пользователи и данные
- **Админ-панель отключена** = Нет доступа к системным функциям

### Важно для друзей:
1. **Генерируй свой JWT_SECRET_KEY** — Никогда не делись этим значением
2. **Не делись файлом `.env`** — Он содержит секретные настройки
3. **Не делись файлом `bot.db`** — Он содержит твои аккаунты и API ключи

---

## Для владельца бота

### Включить админ-панель локально:

1. **Отредактируй `.env`:**
   ```
   ADMIN_ENABLED=true
   ```

2. **Запусти локально (не Docker):**
   ```bash
   python main.py
   ```

3. **Создай админ-пользователя:**
   ```bash
   python create_admin.py
   ```

4. **Открой админ-панель:**
   - Перейди на http://localhost:8000/admin
   - Войди с админ-данными

### Включить админку в Docker (не рекомендуется для shared):

Переопредели переменную окружения:
```bash
ADMIN_ENABLED=true docker-compose up -d
```

Или создай `docker-compose.override.yml`:
```yaml
version: '3.8'
services:
  bot:
    environment:
      - ADMIN_ENABLED=true
```

---

## Способы поделиться

### Способ 1: Поделиться репозиторием (Рекомендуется)

1. Залей код на GitHub/GitLab (приватный репо)
2. Добавь друзей как коллабораторов
3. Они клонируют и запускают через Docker

**Плюсы:** Лёгкие обновления, контроль версий
**Минусы:** Требует знания Git

### Способ 2: Поделиться Docker образом

```bash
# Ты собираешь:
docker build -t csfloat-bot .
docker save csfloat-bot > csfloat-bot.tar

# Друг загружает:
docker load < csfloat-bot.tar
docker run -p 8000:8000 -e JWT_SECRET_KEY=его-секрет csfloat-bot
```

**Плюсы:** Не нужно делиться кодом
**Минусы:** Большой размер файла, ручные обновления

### Способ 3: Поделиться ZIP архивом

1. Заархивируй папку проекта (исключая `venv/`, `bot.db`, `.env`)
2. Отправь другу
3. Он распаковывает и следует инструкциям

**Плюсы:** Просто
**Минусы:** Нет автоматических обновлений

---

## FAQ

### В: Что если друг включит ADMIN_ENABLED=true?

**О:** Админ-панель появится, но ему всё ещё нужен:
- Валидный аккаунт пользователя с `is_admin=True`
- Админ-аккаунт должен быть создан через `create_admin.py`

Без админ-аккаунта в базе данных панель бесполезна.

### В: Может ли друг видеть мои данные?

**О:** Нет. Каждый деплой имеет свою:
- Базу данных (bot.db)
- JWT секрет (токены сессий)
- Аккаунты пользователей

### В: Могу ли я запустить несколько ботов на одном сервере?

**О:** Да, измени порт:
```yaml
# docker-compose.yml
ports:
  - "8001:8000"  # Измени 8001 на любой свободный порт
```

### В: Как друзья получают обновления?

**О:** Если используешь Git:
```bash
git pull
docker-compose down
docker-compose up -d --build
```
